(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/sunui-upimg/sunui-upimg-basic"],{"128d":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement;t._self._c},u=[];n.d(e,"a",function(){return r}),n.d(e,"b",function(){return u})},"564f":function(t,e,n){},"58ae":function(t,e,n){"use strict";n.r(e);var r=n("128d"),u=n("8d87");for(var i in u)"default"!==i&&function(t){n.d(e,t,function(){return u[t]})}(i);n("65ff");var a=n("2877"),c=Object(a["a"])(u["default"],r["a"],r["b"],!1,null,"0eb2b938",null);e["default"]=c.exports},"65ff":function(t,e,n){"use strict";var r=n("564f"),u=n.n(r);u.a},"8d87":function(t,e,n){"use strict";n.r(e);var r=n("def4"),u=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);e["default"]=u.a},def4:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=u(n("a34a"));function u(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r,u,i,a){try{var c=t[i](a),s=c.value}catch(o){return void n(o)}c.done?e(s):Promise.resolve(s).then(r,u)}function a(t){return function(){var e=this,n=arguments;return new Promise(function(r,u){var a=t.apply(e,n);function c(t){i(a,r,u,c,s,"next",t)}function s(t){i(a,r,u,c,s,"throw",t)}c(void 0)})}}var c={data:function(){return{upload_after_list:[],upload_picture_list:[]}},name:"sunui-upimg",props:{upImgConfig:{type:Object}},created:function(){},methods:{initServerImage:function(t){this.upload_picture_list=t},chooseImage:function(t){f(this,parseInt(t),this.upImgConfig)},uploadimage:function(t){l(this,t)},deleteImg:function(t){p(t,this)},previewImg:function(t){_(t,this)},previewImgs:function(t){h(t,this)}}};e.default=c;var s=function(){var e=a(r.default.mark(function e(n,u,i,c){var s,l;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s={url:u.basicConfig.url||""},e.next=3,t.uploadFile({url:s.url,filePath:i[c]["path"],name:"file",formData:{},success:function(){var e=a(r.default.mark(function e(a){var s;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(200!=a.statusCode){e.next=8;break}return s=JSON.parse(a.data),console.log("%c 后端上传(成功返回地址):".concat(s.info),"color:#1AAD19"," at components\\sunui-upimg\\sunui-upimg-basic.vue:92"),i[c]["path_server"]=s.info,n.upload_picture_list=i,e.next=7,o(n,i,u.count);case 7:t.hideLoading();case 8:case"end":return e.stop()}},e,this)}));function s(t){return e.apply(this,arguments)}return s}(),fail:function(){var e=a(r.default.mark(function e(u){return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.showLoading({title:"上传失败!"}),n.upload_picture_list=[],n.upload_after_list=[],setTimeout(function(){t.hideLoading()},2e3),console.warn(u,"请检查是否CORB/CORS错误!"," at components\\sunui-upimg\\sunui-upimg-basic.vue:111");case 5:case"end":return e.stop()}},e,this)}));function u(t){return e.apply(this,arguments)}return u}()});case 3:l=e.sent,l.onProgressUpdate(function(){var t=a(r.default.mark(function t(e){var u,a;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:u=0,a=n.upload_picture_list.length;case 1:if(!(u<a)){t.next=8;break}return t.next=4,e.progress;case 4:i[u]["upload_percent"]=t.sent;case 5:u++,t.next=1;break;case 8:n.upload_picture_list=i;case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e,this)}));return function(t,n,r,u){return e.apply(this,arguments)}}(),o=function(){var t=a(r.default.mark(function t(e,n,u){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$emit("onUpImg",e.upload_picture_list);case 2:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}(),l=function(){var t=a(r.default.mark(function t(e,n){var u,i;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:u=0,i=e.upload_picture_list.length;case 1:if(!(u<i)){t.next=8;break}if(0!=e.upload_picture_list[u]["upload_percent"]){t.next=5;break}return t.next=5,s(e,n,e.upload_picture_list,u);case 5:u++,t.next=1;break;case 8:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),p=function(){var t=a(r.default.mark(function t(e,n){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.$emit("onImgDel",{url:e.currentTarget.dataset.url,index:e.currentTarget.dataset.index});case 2:n.upload_picture_list.splice(e.currentTarget.dataset.index,1),n.upload_after_list.splice(e.currentTarget.dataset.index,1),n.upload_picture_list=n.upload_picture_list;case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),f=function(e,n,u){var i={basicConfig:{url:u.basicConfig.url},count:n,notli:u.notli,sourceType:u.sourceType,sizeType:u.sizeType,tips:u.tips||!1};t.chooseImage({count:i.notli?i.count=9:0==e.upload_after_list.length?i.count:i.count-e.upload_after_list.length,sizeType:""==i.sizeType||void 0==i.sizeType||1==i.sizeType?["compressed"]:["original"],sourceType:""==i.sourceType||void 0==i.sourceType?["album","camera"]:"camera"==i.sourceType?["camera"]:"album"==i.sourceType?["album"]:["album","camera"],success:function(){var t=a(r.default.mark(function t(n){var u,a;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:for(u=0,a=n.tempFiles.length;u<a;u++)n.tempFiles[u]["upload_percent"]=0,n.tempFiles[u]["path_server"]="",e.upload_picture_list.push(n.tempFiles[u]),e.upload_picture_list.length>i.count&&(e.upload_picture_list=e.upload_picture_list.slice(0,i.count));return t.next=3,d(e,n,i);case 3:case"end":return t.stop()}},t,this)}));function n(e){return t.apply(this,arguments)}return n}()})},d=function(t,e,n){!n.notli&&n.count==t.upload_picture_list.length&&l(t,n),n.notli&&9==n.count&&l(t,n),t.upload_after_list=t.upload_after_list.concat(e.tempFilePaths).slice(0,n.count),t.upload_picture_list=t.upload_picture_list.slice(0,n.count)},_=function(e,n){t.previewImage({current:n.upload_after_list[e.currentTarget.dataset.index],urls:n.upload_after_list})},h=function(){var e=a(r.default.mark(function e(n,u){var i,a,c;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(i=[],a=0,c=u.upload_picture_list.length;a<c;a++)i.push(u.upload_picture_list[a].path_server);t.previewImage({current:n.currentTarget.dataset.src,urls:i});case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}).call(this,n("6e42")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/sunui-upimg/sunui-upimg-basic-create-component',
    {
        'components/sunui-upimg/sunui-upimg-basic-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('6e42')['createComponent'](__webpack_require__("58ae"))
        })
    },
    [['components/sunui-upimg/sunui-upimg-basic-create-component']]
]);                
