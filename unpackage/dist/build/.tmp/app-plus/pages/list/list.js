(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/list/list"],{"0751":function(e,t,i){"use strict";i.r(t);var s=i("f25b"),a=i("ddfe");for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);var o=i("2877"),r=Object(o["a"])(a["default"],s["a"],s["b"],!1,null,null,null);t["default"]=r.exports},"9fac":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=0,s={data:function(){return{refreshing:!1,loadMoreText:"加载中...",lists:[],id:0,fetchPageNum:0}},onLoad:function(t){var i=this;e.setNavigationBarTitle({title:"专题："+t.type}),console.log(t," at pages\\list\\list.vue:37"),this.id=t.id,setTimeout(function(){i.getData()},300),e.getProvider({service:"share",success:function(e){for(var t=[],s=0;s<e.provider.length;s++)switch(e.provider[s]){case"weixin":t.push({name:"分享到微信好友",id:"weixin"}),t.push({name:"分享到微信朋友圈",id:"weixin",type:"WXSenceTimeline"});break;case"qq":t.push({name:"分享到QQ",id:"qq"});break;default:break}i.providerList=t},fail:function(e){console.log("获取分享通道失败",e," at pages\\list\\list.vue:73")}})},onPullDownRefresh:function(){console.log("下拉刷新"," at pages\\list\\list.vue:78"),this.refreshing=!0,this.getData()},onReachBottom:function(){console.log("上拉加载刷新"," at pages\\list\\list.vue:83"),this.fetchPageNum>4?this.loadMoreText="没有更多了":this.getData()},methods:{getData:function(t){var s=this;e.request({url:this.$serverUrl+"/api/picture/list.php?type="+this.id,success:function(t){if(200!==t.statusCode)console.log("请求失败",t," at pages\\list\\list.vue:96");else{if(1001===t.data.ret)return console.log(t.data.ret," at pages\\list\\list.vue:99"),void(s.loadMoreText=t.data.msg);if(s.refreshing&&t.data.data[0].id===(s.lists&&s.lists[0].data[0].id))return e.showToast({title:"已经最新",icon:"none"}),s.refreshing=!1,void e.stopPullDownRefresh();for(var a={id:"",data:[]},n=[],o=t.data.data,r=0,l=o.length;r<l;r++){Math.floor(r/2);a.id="list"+i,o[r].keys=i++,a.data.push(o[r]),r%2==1&&(n.push(a),a={id:"",data:[]})}console.log("list页面得到lists",n," at pages\\list\\list.vue:131"),s.refreshing?(s.refreshing=!1,e.stopPullDownRefresh(),s.lists=n,s.fetchPageNum=2):(s.lists=s.lists.concat(n),s.fetchPageNum+=1),s.fetchPageNum+=1}}})},goDetail:function(t){e.navigateTo({url:"/pages/detail/detail?data="+encodeURIComponent(JSON.stringify(t))})},share:function(t){var i=this;if(0!==this.providerList.length){var s=this.providerList.map(function(e){return e.name});e.showActionSheet({itemList:s,success:function(s){e.share({provider:i.providerList[s.tapIndex].id,scene:i.providerList[s.tapIndex].type&&"WXSenceTimeline"===i.providerList[s.tapIndex].type?"WXSenceTimeline":"WXSceneSession",type:0,title:"uni-app模版",summary:t.title,imageUrl:t.img_src,href:"https://uniapp.dcloud.io",success:function(e){console.log("success:"+JSON.stringify(e)," at pages\\list\\list.vue:175")},fail:function(t){e.showModal({content:t.errMsg,showCancel:!1})}})}})}else e.showModal({title:"当前环境无分享渠道!",showCancel:!1})}}};t.default=s}).call(this,i("6e42")["default"])},ddfe:function(e,t,i){"use strict";i.r(t);var s=i("9fac"),a=i.n(s);for(var n in s)"default"!==n&&function(e){i.d(t,e,function(){return s[e]})}(n);t["default"]=a.a},f25b:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement;e._self._c},a=[];i.d(t,"a",function(){return s}),i.d(t,"b",function(){return a})}},[["f1f9","common/runtime","common/vendor"]]]);