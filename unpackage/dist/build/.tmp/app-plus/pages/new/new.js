(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/new/new"],{"31f5":function(e,t,n){"use strict";n.r(t);var i=n("9a44"),s=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);t["default"]=s.a},"6b79":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement;e._self._c},s=[];n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s})},"9a44":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{refreshing:!1,providerList:[],list:[],fetchPageNum:1}},onLoad:function(){var t=this;this.getData(),e.getProvider({service:"share",success:function(e){for(var n=[],i=0;i<e.provider.length;i++)switch(e.provider[i]){case"weixin":n.push({name:"分享到微信好友",id:"weixin"}),n.push({name:"分享到微信朋友圈",id:"weixin",type:"WXSenceTimeline"});break;case"qq":n.push({name:"分享到QQ",id:"qq"});break;default:break}t.providerList=n},fail:function(e){console.log("获取分享通道失败",e," at pages\\new\\new.vue:61")}})},onReachBottom:function(){console.log("滑动到页面底部"," at pages\\new\\new.vue:66"),this.getData()},onPullDownRefresh:function(){console.log("下拉刷新"," at pages\\new\\new.vue:70"),this.refreshing=!0,this.getData()},methods:{getData:function(){var t=this;e.request({url:this.$serverUrl+"/api/picture/posts.php?page="+(this.refreshing?1:this.fetchPageNum)+"&per_page=5",success:function(n){if(console.log("data",n," at pages\\new\\new.vue:80"),200!==n.statusCode)console.log("失败!"," at pages\\new\\new.vue:82");else{if(t.refreshing&&n.data[0].id===t.list[0].id)return e.showToast({title:"已经最新",icon:"none"}),t.refreshing=!1,void e.stopPullDownRefresh();t.refreshing?(t.refreshing=!1,e.stopPullDownRefresh(),t.list=n.data,t.fetchPageNum=2):(t.list=t.list.concat(n.data),t.fetchPageNum+=1)}}})},goDetail:function(t){e.navigateTo({url:"../detail/detail?data="+encodeURIComponent(JSON.stringify(t))})},share:function(t){var n=this;if(0!==this.providerList.length){var i=this.providerList.map(function(e){return e.name});e.showActionSheet({itemList:i,success:function(i){e.share({provider:n.providerList[i.tapIndex].id,scene:n.providerList[i.tapIndex].type&&"WXSenceTimeline"===n.providerList[i.tapIndex].type?"WXSenceTimeline":"WXSceneSession",type:0,title:"uni-app模版",summary:t.title,imageUrl:t.img_src,href:"https://uniapp.dcloud.io",success:function(e){console.log("success:"+JSON.stringify(e)," at pages\\new\\new.vue:135")},fail:function(t){e.showModal({content:t.errMsg,showCancel:!1})}})}})}else e.showModal({title:"当前环境无分享渠道!",showCancel:!1})}}};t.default=n}).call(this,n("6e42")["default"])},d0ec:function(e,t,n){"use strict";n.r(t);var i=n("6b79"),s=n("31f5");for(var a in s)"default"!==a&&function(e){n.d(t,e,function(){return s[e]})}(a);var o=n("2877"),r=Object(o["a"])(s["default"],i["a"],i["b"],!1,null,null,null);t["default"]=r.exports}},[["643d","common/runtime","common/vendor"]]]);