(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/personal/order/payMoney"],{"3d46":function(e,t,a){"use strict";var s=a("9529"),n=a.n(s);n.a},"50b0":function(e,t,a){"use strict";a.r(t);var s=a("6955"),n=a("9526");for(var o in n)"default"!==o&&function(e){a.d(t,e,function(){return n[e]})}(o);a("3d46");var r=a("2877"),i=Object(r["a"])(n["default"],s["a"],s["b"],!1,null,null,null);t["default"]=i.exports},6955:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement;e._self._c},n=[];a.d(t,"a",function(){return s}),a.d(t,"b",function(){return n})},9526:function(e,t,a){"use strict";a.r(t);var s=a("f0f5"),n=a.n(s);for(var o in s)"default"!==o&&function(e){a.d(t,e,function(){return s[e]})}(o);t["default"]=n.a},9529:function(e,t,a){},f0f5:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a("a34a")),n=i(a("2120")),o=i(a("bbf9")),r=i(a("c916"));function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t,a,s,n,o,r){try{var i=e[o](r),u=i.value}catch(c){return void a(c)}i.done?t(u):Promise.resolve(u).then(s,n)}function c(e){return function(){var t=this,a=arguments;return new Promise(function(s,n){var o=e.apply(t,a);function r(e){u(o,s,n,r,i,"next",e)}function i(e){u(o,s,n,r,i,"throw",e)}r(void 0)})}}var d=function(){return Promise.all([a.e("common/vendor"),a.e("components/input-box/input-box")]).then(a.bind(null,"fe9b"))},f=[["camera"],["album"],["camera","album"]],l=[["compressed"],["original"],["compressed","original"]],h={components:{inputBox:d},data:function(){return{message:"",orderDetail:{},baseUrl:"",imageList:[],sourceTypeIndex:2,sourceType:["拍照","相册","拍照或相册"],sizeTypeIndex:2,sizeType:["压缩","原图","压缩或原图"],countIndex:8,count:[1,2,3,4,5,6,7,8,9],safePwd:"",body:{orderId:"",safePwd:"",payUrl:""}}},onLoad:function(e){this.body.orderId=e.value},methods:{getOrderDetail:function(){var t=this;n.default.config.header={Authorization:e.getStorageSync("token")};this.tabCur;n.default.post("api/Order/GetOrderDetail?orderId="+this.body.orderId).then(function(e){1==e.data.StatusCode?e.data.Data?(e.data.Data.f_statusStr=t.getStatusStr(e.data.Data.f_status),t.orderDetail=e.data.Data):t.orderDetail={}:(t.message=e.data.Message,t.$refs.toast.show())}).catch(function(e){t.message="请求失败",t.$refs.toast.show()})},uploadImage:function(){var t=this;if(""==this.safePwd)return this.message="请输入二级密码",void this.$refs.toast.show();if(0==this.imageList.length)return this.message="请上传付款凭证",void this.$refs.toast.show();this.body.userAccount=e.getStorageSync("account");for(var a=[],s=0,n=this.imageList.length;s<n;s++){var o={name:"image-"+s,uri:this.imageList[s]};a.push(o)}e.uploadFile({url:this.baseUrl+"api/Upload/UploadImage",files:a,filePath:a[0].uri,header:{Authorization:e.getStorageSync("token")},name:"file",success:function(e){console.log(e," at pages\\personal\\order\\payMoney.vue:154");var a=JSON.parse(e.data);console.log(a," at pages\\personal\\order\\payMoney.vue:156"),1==a.StatusCode&&(a.Data.isSuccess?(t.body.payUrl=a.Data.filePath,t.submitPay()):(t.message=a.Data.msg,t.$refs.toast.show()))},fail:function(e){t.message="请求失败",t.$refs.toast.show()}})},submitPay:function(){var t=this,a=(0,r.default)(this.safePwd.toString());this.body.safePwd=(0,r.default)(a),n.default.config.header={Authorization:e.getStorageSync("token")},n.default.post("api/Order/Pay",this.body).then(function(a){1==a.data.StatusCode?1==a.data.Data?(t.message="付款成功",t.$refs.toast.show(),e.navigateBack()):0==a.data.Data?(t.message="订单状态异常",t.$refs.toast.show()):2==a.data.Data?(t.message="人员不匹配",t.$refs.toast.show()):3==a.data.Data?(t.message="二级密码不正确",t.$refs.toast.show()):4==a.data.Data&&(t.message="提交失败",t.$refs.toast.show()):(t.message=a.data.Message,t.$refs.toast.show())}).catch(function(e){t.message="请求失败",t.$refs.toast.show()})},previewImage:function(t){var a=t.target.dataset.src;e.previewImage({current:a,urls:this.imageList})},close:function(e){this.imageList.splice(e,1)},chooseImage:function(){var t=c(s.default.mark(function t(){var a,n=this;return s.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(9!==this.imageList.length){t.next=7;break}return t.next=3,this.isFullImg();case 3:if(a=t.sent,console.log("是否继续?",a," at pages\\personal\\order\\payMoney.vue:224"),a){t.next=7;break}return t.abrupt("return");case 7:e.chooseImage({sourceType:f[this.sourceTypeIndex],sizeType:l[this.sizeTypeIndex],count:this.imageList.length+this.count[this.countIndex]>9?9-this.imageList.length:this.count[this.countIndex],success:function(e){var t=function(e){n.imageList=n.imageList.concat(e)};o.default.compress(e.tempFilePaths,t)}});case 8:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}(),getStatusStr:function(e){var t="";switch(e){case 0:t="待支付";break;case 1:t="收益中";break;case 2:t="支付超时";break;case 3:t="待确认";break;case 4:t="取消";break;case 5:t="申诉中";break;case 6:t="订单结束";break}return t}},mounted:function(){this.baseUrl="http://39.100.76.224:8081/",this.getOrderDetail()}};t.default=h}).call(this,a("6e42")["default"])}},[["3cb7","common/runtime","common/vendor"]]]);