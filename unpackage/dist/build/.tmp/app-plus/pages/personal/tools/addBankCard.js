(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/personal/tools/addBankCard"],{"22a8":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("a34a")),s=i(a("2120")),o=i(a("bbf9"));function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a,n,s,o,i){try{var r=e[o](i),u=r.value}catch(c){return void a(c)}r.done?t(u):Promise.resolve(u).then(n,s)}function u(e){return function(){var t=this,a=arguments;return new Promise(function(n,s){var o=e.apply(t,a);function i(e){r(o,n,s,i,u,"next",e)}function u(e){r(o,n,s,i,u,"throw",e)}i(void 0)})}}var c=function(){return Promise.all([a.e("common/vendor"),a.e("components/input-box/input-box")]).then(a.bind(null,"fe9b"))},d=[["camera"],["album"],["camera","album"]],l=[["compressed"],["original"],["compressed","original"]],f={data:function(){return{baseUrl:"",message:"",content:"发送验证码",totalTime:120,canClick:!0,body:{type:1,typeName:"支付宝",account:"",userAccount:"",accountName:"",filePath:"",f_SubBranchName:"",code:""},imageList:[],sourceTypeIndex:2,sourceType:["拍照","相册","拍照或相册"],sizeTypeIndex:2,sizeType:["压缩","原图","压缩或原图"],countIndex:8,count:[1,2,3,4,5,6,7,8,9],array:[{id:1,name:"支付宝"},{id:2,name:"微信"},{id:3,name:"中国银行"},{id:3,name:"工商银行"}],index:0}},components:{inputBox:c},methods:{bindPickerChange:function(e){console.log("picker发送选择改变，携带值为："+e.target.value," at pages\\personal\\tools\\addBankCard.vue:117"),0==e.target.value?(this.body.type=1,this.body.typeName="支付宝"):1==e.target.value?(this.body.type=2,this.body.typeName="微信"):(this.body.type=3,this.body.typeName="银行卡"),this.index=e.target.value},uploadImage:function(){var t=this;if(""==this.body.accountName)return this.message="请输入账户名称",void this.$refs.toast.show();if(""==this.body.account)return this.message="请输入账户",void this.$refs.toast.show();if(3==this.body.type&&""==this.body.f_SubBranchName)return this.message="请输入开户行地址",void this.$refs.toast.show();if(""==this.body.code)return this.message="请输入验证码",void this.$refs.toast.show();this.body.userAccount=e.getStorageSync("account");for(var a=[],n=0,s=this.imageList.length;n<s;n++){var o={name:"image-"+n,uri:this.imageList[n]};a.push(o)}e.uploadFile({url:this.baseUrl+"api/Upload/UploadImage",files:a,filePath:a[0].uri,header:{Authorization:e.getStorageSync("token")},name:"file",success:function(e){console.log(e," at pages\\personal\\tools\\addBankCard.vue:174");var a=JSON.parse(e.data);console.log(a," at pages\\personal\\tools\\addBankCard.vue:176"),1==a.StatusCode&&(console.log(a.Data.isSuccess," at pages\\personal\\tools\\addBankCard.vue:178"),a.Data.isSuccess?(t.body.filePath=a.Data.filePath,t.submitAdd()):(t.message=a.Data.msg,t.$refs.toast.show()))},fail:function(e){t.message="请求失败",t.$refs.toast.show()}})},submitAdd:function(){var t=this;s.default.config.header={Authorization:e.getStorageSync("token")},s.default.post("api/PayModel/AddPayModel",this.body).then(function(a){1==a.data.StatusCode?(t.message="添加成功",t.$refs.toast.show(),e.navigateBack()):(t.message=a.data.Message,t.$refs.toast.show())}).catch(function(e){t.message="请求失败",t.$refs.toast.show()})},countDown:function(){var e=this;if(this.canClick){this.canClick=!1;var t=window.setInterval(function(){e.totalTime--,e.content=e.totalTime+"s后重新发送",e.totalTime<0&&(window.clearInterval(t),e.content="重新发送验证码",e.totalTime=10,e.canClick=!0)},1e3)}},sendCodeMessage:function(){var t=this;s.default.config.header={Authorization:e.getStorageSync("token")};var a={Account:"15882039655"};s.default.post("api/NoAuthorize/SendCodeMessage",a).then(function(e){1==e.data.StatusCode?(t.countDown(),t.message="验证码发送成功",t.$refs.toast.show()):(t.message=e.data.Message,t.$refs.toast.show())}).catch(function(e){t.message="请求失败",t.$refs.toast.show()})},previewImage:function(t){var a=t.target.dataset.src;e.previewImage({current:a,urls:this.imageList})},close:function(e){this.imageList.splice(e,1)},chooseImage:function(){var t=u(n.default.mark(function t(){var a,s=this;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(9!==this.imageList.length){t.next=7;break}return t.next=3,this.isFullImg();case 3:if(a=t.sent,console.log("是否继续?",a," at pages\\personal\\tools\\addBankCard.vue:266"),a){t.next=7;break}return t.abrupt("return");case 7:e.chooseImage({sourceType:d[this.sourceTypeIndex],sizeType:l[this.sizeTypeIndex],count:this.imageList.length+this.count[this.countIndex]>9?9-this.imageList.length:this.count[this.countIndex],success:function(e){var t=function(e){s.imageList=s.imageList.concat(e)};o.default.compress(e.tempFilePaths,t)}});case 8:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}()},mounted:function(){this.baseUrl="http://39.100.76.224:8081/"}};t.default=f}).call(this,a("6e42")["default"])},2506:function(e,t,a){"use strict";a.r(t);var n=a("955f"),s=a("462e");for(var o in s)"default"!==o&&function(e){a.d(t,e,function(){return s[e]})}(o);a("6317");var i=a("2877"),r=Object(i["a"])(s["default"],n["a"],n["b"],!1,null,null,null);t["default"]=r.exports},"462e":function(e,t,a){"use strict";a.r(t);var n=a("22a8"),s=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,function(){return n[e]})}(o);t["default"]=s.a},6317:function(e,t,a){"use strict";var n=a("9cc1"),s=a.n(n);s.a},"955f":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},s=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return s})},"9cc1":function(e,t,a){}},[["f797","common/runtime","common/vendor"]]]);