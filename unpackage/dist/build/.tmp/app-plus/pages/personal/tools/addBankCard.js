(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/personal/tools/addBankCard"],{"22a8":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i(a("a34a")),n=i(a("2120")),o=i(a("bbf9"));function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,a,s,n,o,i){try{var r=t[o](i),u=r.value}catch(c){return void a(c)}r.done?e(u):Promise.resolve(u).then(s,n)}function u(t){return function(){var e=this,a=arguments;return new Promise(function(s,n){var o=t.apply(e,a);function i(t){r(o,s,n,i,u,"next",t)}function u(t){r(o,s,n,i,u,"throw",t)}i(void 0)})}}var c=function(){return Promise.all([a.e("common/vendor"),a.e("components/input-box/input-box")]).then(a.bind(null,"fe9b"))},d=[["camera"],["album"],["camera","album"]],l=[["compressed"],["original"],["compressed","original"]],f={data:function(){return{baseUrl:"",message:"",content:"发送验证码",totalTime:120,canClick:!0,body:{type:1,typeName:"支付宝",account:"",userAccount:"",accountName:"",filePath:"",f_SubBranchName:"",code:""},imageList:[],sourceTypeIndex:2,sourceType:["拍照","相册","拍照或相册"],sizeTypeIndex:2,sizeType:["压缩","原图","压缩或原图"],countIndex:8,count:[1,2,3,4,5,6,7,8,9],array:[{id:1,name:"支付宝"},{id:2,name:"微信"},{id:3,name:"中国银行"},{id:3,name:"工商银行"}],index:0}},components:{inputBox:c},methods:{bindPickerChange:function(t){console.log("picker发送选择改变，携带值为："+t.target.value," at pages\\personal\\tools\\addBankCard.vue:121"),0==t.target.value?(this.body.type=1,this.body.typeName="支付宝"):1==t.target.value?(this.body.type=2,this.body.typeName="微信"):(this.body.type=3,this.body.typeName="银行卡"),this.index=t.target.value},valitate:function(){return!!(this.$refs.input1.getValue()&&this.$refs.input2.getValue()&&this.$refs.input3.getValue())&&(3!=this.body.type||!!this.$refs.input4.getValue())},uploadImage:function(){var e=this;if(this.valitate()){if(0==this.imageList.length)return this.message="请选择收款码",void this.$refs.toast.show();this.body.userAccount=t.getStorageSync("account");for(var a=[],s=0,n=this.imageList.length;s<n;s++){var o={name:"image-"+s,uri:this.imageList[s]};a.push(o)}t.uploadFile({url:this.baseUrl+"api/Upload/UploadImage",files:a,filePath:a[0].uri,header:{Authorization:t.getStorageSync("token")},name:"file",success:function(t){console.log(t," at pages\\personal\\tools\\addBankCard.vue:194");var a=JSON.parse(t.data);console.log(a," at pages\\personal\\tools\\addBankCard.vue:196"),1==a.StatusCode&&(a.Data.isSuccess?(e.body.filePath=a.Data.filePath,e.submitAdd()):(e.message=a.Data.msg,e.$refs.toast.show()))},fail:function(t){e.message="请求失败",e.$refs.toast.show()}})}},submitAdd:function(){var e=this;n.default.config.header={Authorization:t.getStorageSync("token")},n.default.post("api/PayModel/AddPayModel",this.body).then(function(a){1==a.data.StatusCode?1==a.data.Data?(e.message="添加成功",e.$refs.toast.show(),t.navigateBack()):0==a.data.Data?(e.message="新增失败",e.$refs.toast.show()):2==a.data.Data?(e.message="用户不存在",e.$refs.toast.show()):3==a.data.Data?(e.message="账号已存在",e.$refs.toast.show()):(e.message="新增失败",e.$refs.toast.show()):(e.message=a.data.Message,e.$refs.toast.show())}).catch(function(t){e.message="请求失败",e.$refs.toast.show()})},countDown:function(){var t=this;if(this.canClick){this.canClick=!1;var e=window.setInterval(function(){t.totalTime--,t.content=t.totalTime+"s后重新发送",t.totalTime<0&&(window.clearInterval(e),t.content="重新发送验证码",t.totalTime=10,t.canClick=!0)},1e3)}},sendCodeMessage:function(){var e=this;n.default.config.header={Authorization:t.getStorageSync("token")};var a={Account:t.getStorageSync("account")};n.default.post("api/NoAuthorize/SendCodeMessage",a).then(function(t){1==t.data.StatusCode?1==t.data.Data?(e.message="发送成功",e.$refs.toast.show(),e.countDown()):0==t.data.Data?(e.message="发送失败",e.$refs.toast.show()):2==t.data.Data?(e.message="参数为空",e.$refs.toast.show()):2==t.data.Data?(e.message="重复发送短信",e.$refs.toast.show()):(e.message="发送失败",e.$refs.toast.show()):(e.message=t.data.Message,e.$refs.toast.show())}).catch(function(t){e.message="请求失败",e.$refs.toast.show()})},previewImage:function(e){var a=e.target.dataset.src;t.previewImage({current:a,urls:this.imageList})},close:function(t){this.imageList.splice(t,1)},chooseImage:function(){var e=u(s.default.mark(function e(){var a,n=this;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(9!==this.imageList.length){e.next=7;break}return e.next=3,this.isFullImg();case 3:if(a=e.sent,console.log("是否继续?",a," at pages\\personal\\tools\\addBankCard.vue:330"),a){e.next=7;break}return e.abrupt("return");case 7:t.chooseImage({sourceType:d[this.sourceTypeIndex],sizeType:l[this.sizeTypeIndex],count:this.imageList.length+this.count[this.countIndex]>9?9-this.imageList.length:this.count[this.countIndex],success:function(t){var e=function(t){n.imageList=n.imageList.concat(t)};o.default.compress(t.tempFilePaths,e)}});case 8:case"end":return e.stop()}},e,this)}));function a(){return e.apply(this,arguments)}return a}()},mounted:function(){this.baseUrl="http://39.100.76.224:8081/"}};e.default=f}).call(this,a("6e42")["default"])},2506:function(t,e,a){"use strict";a.r(e);var s=a("da79"),n=a("462e");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("6317");var i=a("2877"),r=Object(i["a"])(n["default"],s["a"],s["b"],!1,null,null,null);e["default"]=r.exports},"462e":function(t,e,a){"use strict";a.r(e);var s=a("22a8"),n=a.n(s);for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);e["default"]=n.a},6317:function(t,e,a){"use strict";var s=a("9cc1"),n=a.n(s);n.a},"9cc1":function(t,e,a){},da79:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c},n=[];a.d(e,"a",function(){return s}),a.d(e,"b",function(){return n})}},[["f797","common/runtime","common/vendor"]]]);