(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/market/market"],{"0a5e":function(t,e,a){"use strict";var n=a("759b"),o=a.n(n);o.a},"759b":function(t,e,a){},"7b17":function(t,e,a){"use strict";a.r(e);var n=a("9060"),o=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);e["default"]=o.a},"80bf":function(t,e,a){"use strict";a.r(e);var n=a("c2dd"),o=a("7b17");for(var s in o)"default"!==s&&function(t){a.d(e,t,function(){return o[t]})}(s);a("0a5e");var i=a("2877"),r=Object(i["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports},9060:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(a("2120")),o=s(a("199f"));function s(t){return t&&t.__esModule?t:{default:t}}var i=function(){return a.e("components/uni-tag/uni-tag").then(a.bind(null,"763b"))},r={components:{uniTag:i},data:function(){return{message:"",refreshing:!1,lists:[],msgId:"",timer:null,fetchPageNum:1}},onLoad:function(){},onShow:function(){this.getData()},onPullDownRefresh:function(){console.log("下拉刷新"," at pages\\market\\market.vue:90"),this.refreshing=!0,this.getData()},onReachBottom:function(){},methods:{getData:function(){var e=this;n.default.config.header={Authorization:t.getStorageSync("token")},n.default.post("api/TemplateInfo/GetCanSelledTemplateList").then(function(a){if(1==a.data.StatusCode){e.lists=[];for(var n=a.data.Data,o=0;o<n.length;o++)if(n[o].f_LevelStr=e.getLevelStr(n[o].f_Level),n[o].f_StatusStr=e.getStatusStr(n[o].f_Status),n[o].f_RateOfRateStr=(100*n[o].f_RateOfRate).toString().substr(0,2)+"%",o%2==0){var s={list:[]};s.id=o,s.list.push(n[o]),e.lists.push(s)}else e.lists[e.lists.length-1].id=o,e.lists[e.lists.length-1].list.push(n[o]);e.refreshing=!1,t.stopPullDownRefresh()}else t.showToast({title:a.data.Message,icon:"none"})}).catch(function(a){e.refreshing=!1,t.stopPullDownRefresh(),t.showToast({title:"请求失败",icon:"none"})})},getStatusStr:function(t){var e="可预约";switch(t){case 1:e="繁殖中";break;case 2:e="抢购";break;case 3:e="已预约";break;case 4:e="待预约";break}return e},getLevelStr:function(t){var e="其他";switch(t){case 1:e="普通";break;case 2:e="勇者";break;case 3:e="卓越";break;case 4:e="稀有";break}return e},diffSubscribe:function(e){var a=this;n.default.config.header={Authorization:t.getStorageSync("token")};var s=e.f_ID;if(4==e.f_Status){this.$refs.loading.open();t.getStorageSync("account"),e.f_ReserveValue;n.default.post("api/UserInfo/DiffSubscribe?templateId="+s).then(function(e){a.$refs.loading.close(),1==e.data.StatusCode?1==e.data.Data?(t.showToast({title:"预约成功",icon:"none"}),a.getData()):0==e.data.Data?t.showToast({title:"预约失败",icon:"none"}):2==e.data.Data?t.showToast({title:"当前帐户未审核",icon:"none"}):3==e.data.Data?t.showToast({title:"当前帐户未激活",icon:"none"}):4==e.data.Data?t.showToast({title:"余额不足",icon:"none"}):t.showToast({title:"预约失败",icon:"none"}):t.showToast({title:e.data.Message,icon:"none"})}).catch(function(e){t.showToast({title:"请求失败",icon:"none"}),a.$refs.loading.close()})}else 2!=e.f_Status&&3!=e.f_Status||(this.$refs.loading.open(),n.default.post("api/Order/PlaceOrder?templateId="+s).then(function(e){1==e.data.StatusCode?(a.msgId=e.data.Data,o.default.isNullOrEmpty(a.msgId)?(a.$refs.loading.close(),t.showToast({title:"预约失败",icon:"none"})):a.timer=setInterval(a.processResult,5e3)):(a.$refs.loading.close(),t.showToast({title:e.data.Message,icon:"none"}))}).catch(function(e){a.$refs.loading.close(),t.showToast({title:"请求失败",icon:"none"})}))},processResult:function(e){var a=this;n.default.config.header={Authorization:t.getStorageSync("token")},n.default.post("api/Order/ProcessResult?msgId="+this.msgId).then(function(e){1==e.data.StatusCode?1==e.data.Data?(a.$refs.loading.close(),window.clearInterval(a.timer),a.timer=null,t.showToast({title:"领养成功",icon:"none"})):0==e.data.Data?(a.$refs.loading.close(),window.clearInterval(a.timer),a.timer=null,t.showToast({title:"领养失败",icon:"none"})):-1==e.data.Data||(a.$refs.loading.close(),window.clearInterval(a.timer),a.timer=null,t.showToast({title:"领养失败",icon:"none"})):(window.clearInterval(a.timer),a.timer=null,a.$refs.loading.close(),t.showToast({title:e.data.Message,icon:"none"}))}).catch(function(e){window.clearInterval(a.timer),a.timer=null,a.$refs.loading.close(),t.showToast({title:"请求失败",icon:"none"}),a.message="请求失败",a.$refs.toast.show()})}}};e.default=r}).call(this,a("6e42")["default"])},c2dd:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},o=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return o})}},[["56b6","common/runtime","common/vendor"]]]);